<app-layout>
    <nz-page-header nzTitle="">
		<nz-breadcrumb nz-page-header-breadcrumb>
			<nz-breadcrumb-item><a routerLink="/dashboard"><i nz-icon nzType="home"></i></a></nz-breadcrumb-item>
			<nz-breadcrumb-item>Recipient Report</nz-breadcrumb-item>
		</nz-breadcrumb>
    </nz-page-header>

    <div nz-row class="mb-1">
        <div nz-col nzSpan="24">
            <form nz-form [formGroup]="searchForm" (ngSubmit)="submitSearch()">
                <div nz-col nzXs="8" nzMd="8">
                    <nz-form-item>
                        <nz-form-control [nzSm]="24" [nzXs]="24">
                        <nz-range-picker formControlName="rangePicker"></nz-range-picker>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="8" nzMd="8">
                    <nz-form-item>
                        <nz-form-control [nzSm]="12" [nzXs]="12" nzErrorTip="Please select Recipient!">
                            <nz-select nzShowSearch nzAllowClear formControlName="recipient" [nzPlaceHolder]="'Select Recipient'">
                                <nz-option *ngFor="let g of recipients" [nzLabel]="g.first_name + ' ' +g.last_name + ' - ID:' +  g.id" [nzValue]="g.id"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <button nz-button [nzType]="'primary'" [disabled]="searchForm.invalid" [nzLoading]="isLoading"><span>Search</span></button>
            </form>
        </div>
	</div>

    <div nz-row class="mb-3" nzGutter="24">
		<div nz-col nzXs="24" nzSm="24" nzLg="24">
            <!-- <nz-card> -->
                <nz-spin [nzSpinning]="isLoading">
                    <nz-table #basicTable [nzData]="users" nzSize="small" nzPageSize="25" [nzBordered]="true">
                        <thead nzShowSizeChanger nzShowPagination>
                            <tr>
                                <th>Recipient Name</th>
                                <th>CNIC</th>
                                <th>Dealer Name - CNIC</th>
                                <th>Shop/Business Name</th>
                                <th>Donor Name - CNIC</th>
                                <th>Amount</th>
                                <th>Category</th>
                                <th>Date</th>
                                <th>Attachements</th>
                                <!-- <th>Actions</th> -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of basicTable.data">
                            <td>{{data?.first_name}} {{data?.last_name}}</td>
                            <td>{{data?.cnic_no}}</td>
                            <td>{{data?.dealer.first_name}} {{data?.dealer.last_name}} - {{data?.dealer.cnic_no}}</td>
                            <td>{{data?.dealer.shop_name}}</td>
                            <td>{{data?.donor?.first_name}} {{data?.donor?.last_name}} - {{data?.donor?.cnic_no}}</td>
                            <td>{{data?.amount}}</td>
                            <td>{{data?.lookup_category}}</td>
                            <td>{{data?.created_at}}</td>
                            <td><span *ngFor="let img of data?.attachements"><img *ngIf="data?.attachements" width="75" height="50" [src]="img" /></span></td>
                            </tr>
                        </tbody>
                    </nz-table>
                </nz-spin>
            <!-- </nz-card> -->
        </div>
    </div>

    <!-- <nz-drawer
      [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
      [nzMaskClosable]="false"
      [nzWidth]="500"
      [nzVisible]="visible"
      [nzTitle]="formTitle"
      (nzOnClose)="closeDrawer()"
    >
        <form nz-form [formGroup]="cotForm" (ngSubmit)="submitForm()" *ngIf="formAction=='add'">
            <div nz-row nzGutter="8">
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="first_name">First Name</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="First Name is required!">
                            <input type="text" nz-input formControlName="first_name" placeholder="First Name *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="last_name">Last Name</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Last Name is required!">
                            <input type="text" nz-input formControlName="last_name" placeholder="Last Name *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">Email</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Email is required!">
                            <input type="email" nz-input formControlName="email" placeholder="Email *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="cnic_no">CNIC No.</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="CNIC# is required!">
                            <input type="text" nz-input formControlName="cnic_no" placeholder="CNIC# *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="age">Age</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Age is required!">
                            <input type="number" nz-input formControlName="age" placeholder="Age *">
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="cnic_no">Gender</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Gender is required!">
                            <input type="text" nz-input formControlName="gender" placeholder="Gender *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="cnic_no">Phone 1</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Primary Phone is required!">
                            <input type="text" nz-input formControlName="phone_primary" placeholder="Phone (primary) *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="phone_secondary">Phone 2</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Secondary Phone is required!">
                            <input type="text" nz-input formControlName="phone_secondary" placeholder="Phone (secondary) *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="gender">Gender</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Please select Gender!">
                            <nz-select formControlName="gender" [nzPlaceHolder]="'Select Gender'">
                                <nz-option *ngFor="let g of genders" [nzLabel]="g" [nzValue]="g"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="password">Password</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Password is required!">
                            <input type="password" nz-input formControlName="password" placeholder="Password *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div class="drawer-footer">
				<button type="button" (click)="closeDrawer()" class="ant-btn" style="margin-right: 8px;"><span>Cancel</span></button>
				<button nz-button [nzType]="'primary'" [disabled]="cotForm.invalid" [nzLoading]="isLoading"><span>Save</span></button>
			</div>
        </form>
        <form nz-form [formGroup]="cotForm2" (ngSubmit)="editUser()" *ngIf="formAction=='edit'">
            <div nz-row nzGutter="8">                
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-control [nzSm]="18" [nzXs]="24">
                            <input type="hidden" nz-input formControlName="id">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="first_name">First Name</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="First Name is required!">
                            <input type="text" nz-input formControlName="first_name" placeholder="First Name *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="last_name">Last Name</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Last Name is required!">
                            <input type="text" nz-input formControlName="last_name" placeholder="Last Name *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">Email</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Email is required!">
                            <input type="email" nz-input formControlName="email" placeholder="Email *" [disabled]="true" >
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="cnic_no">CNIC No.</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="CNIC# is required!">
                            <input type="text" nz-input formControlName="cnic_no" placeholder="CNIC# *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="age">Age</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Age is required!">
                            <input type="number" nz-input formControlName="age" placeholder="Age *">
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="cnic_no">Gender</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Gender is required!">
                            <input type="text" nz-input formControlName="gender" placeholder="Gender *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="cnic_no">Phone 1</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Primary Phone is required!">
                            <input type="text" nz-input formControlName="phone_primary" placeholder="Phone (primary) *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="phone_secondary">Phone 2</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Secondary Phone is required!">
                            <input type="text" nz-input formControlName="phone_secondary" placeholder="Phone (secondary) *">
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col nzXs="24" nzMd="24">
                    <nz-form-item>
                        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="gender">Gender</nz-form-label>
                        <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Please select Gender!">
                            <nz-select formControlName="gender" [nzPlaceHolder]="'Select Gender'">
                                <nz-option *ngFor="let g of genders" [nzLabel]="g" [nzValue]="g"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div class="drawer-footer">
				<button type="button" (click)="closeDrawer()" class="ant-btn" style="margin-right: 8px;"><span>Cancel</span></button>
				<button nz-button [nzType]="'primary'" [disabled]="cotForm2.invalid" [nzLoading]="isLoading"><span>Save</span></button>
			</div>
        </form>
    </nz-drawer> -->

</app-layout>
